name: Claude Dual Agent Implementation

on:
  push:

jobs:
  generate-code:
    strategy:
      matrix:
        agent_id: [agent-a, agent-b]
    runs-on: ubuntu-latest
    name: Generate by ${{ matrix.agent_id }}
    steps:
      - name: チェックアウト
        uses: actions/checkout@v4

      - name: Claude CLI をインストール
        run: npm install -g @anthropic-ai/claude-code

      - name: Claude バージョン確認
        run: claude --version

      - name: Claude にコード生成させる（${{ matrix.agent_id }}）
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          echo "▶ Claude に問い合わせます（Agent: ${{ matrix.agent_id }})"
          claude -p "FizzBuzzをPython関数 fizzbuzz(n: int) -> str で実装してください。仕様：3の倍数はFizz、5の倍数はBuzz、15の倍数はFizzBuzz、それ以外は数字の文字列を返す。" \
          > fizzbuzz_${{ matrix.agent_id }}.py \
          || echo "Claude 実行に失敗しました"

      - name: Claude 出力確認
        run: cat fizzbuzz_${{ matrix.agent_id }}.py

      - name: Claude 出力を保存
        run: |
          mkdir -p modules/${{ matrix.agent_id }}
          cat fizzbuzz_${{ matrix.agent_id }}.py > modules/$
